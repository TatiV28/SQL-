-- Create tables for books, borrowers, and loans
CREATE TABLE Books (
    book_id INT PRIMARY KEY,
    title VARCHAR(100),
    author VARCHAR(50)
);

CREATE TABLE Borrowers (
    borrower_id INT PRIMARY KEY,
    name VARCHAR(50)
);

CREATE TABLE Loans (
    loan_id INT PRIMARY KEY,
    book_id INT,
    borrower_id INT,
    loan_date DATE,
    due_date DATE,
    return_date DATE,
    FOREIGN KEY (book_id) REFERENCES Books(book_id),
    FOREIGN KEY (borrower_id) REFERENCES Borrowers(borrower_id)
);

-- Insert sample data
INSERT INTO Books VALUES (1, 'SQL Basics', 'John Author'), (2, 'Database Design', 'Jane Writer');
INSERT INTO Borrowers VALUES (1, 'Alice'), (2, 'Bob');
INSERT INTO Loans VALUES (1, 1, 1, '2025-01-01', '2025-01-15', NULL), (2, 2, 2, '2025-01-10', '2025-01-24', '2025-01-20');

-- Query: Find overdue books
SELECT b.title, br.name, l.due_date
FROM Loans l
JOIN Books b ON l.book_id = b.book_id
JOIN Borrowers br ON l.borrower_id = br.borrower_id
WHERE l.return_date IS NULL AND l.due_date < CURRENT_DATE;
